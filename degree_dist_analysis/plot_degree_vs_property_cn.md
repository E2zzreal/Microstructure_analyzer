# `plot_degree_vs_property.py` 中文文档

## 目的

该脚本用于生成图表，探索晶粒的拓扑度（即其邻居数量，通常是 `neighbor_count`）与该晶粒的其他几何或形状属性（例如 `area`, `aspect_ratio`, `compactness`）之间的关系。

理解这些关系有助于揭示特定类型的晶粒（例如小晶粒、细长晶粒）在微观结构中是否倾向于具有更高或更低的连通性。

## 先决条件

*   包含样本中每个晶粒特征的 `_details.csv` 文件，该文件需包含 `neighbor_count`（或指定的度特征列）和所选的属性特征列。此文件由 `run_feature_extraction.py` 使用 `--save_grain_details` 标志生成。

## 使用方法

```bash
python plot_degree_vs_property.py --details_csv <详细数据文件路径> \
                                  --output_path <输出图像保存路径.png> \
                                  [--property <属性特征名称>] \
                                  [--degree <度特征名称>] \
                                  [--plot_type <图表类型>]
```

## 参数说明

*   `--details_csv` (必需): 输入的包含每个晶粒特征的 `_details.csv` 文件路径。
*   `--output_path` (必需): 输出图表图像（例如 `.png`）的保存路径。
*   `--property` (可选): 要绘制在 x 轴上的特征列名称。默认值：`'area'` (面积)。
*   `--degree` (可选): 代表晶粒度数、要绘制在 y 轴上的特征列名称。默认值：`'delaunay_degree_adaptive_2r0_5std'` (邻居数量)。
*   `--plot_type` (可选): 要生成的图表类型。可选值：
    *   `'scatter'` (默认): 显示单个数据点。适合观察原始分布，但在数据点很多时可能出现过度绘制问题。
    *   `'hexbin'`: 将点聚合到六边形箱中，并根据箱内点的密度进行着色。适合大型数据集以可视化密度模式。
    *   `'kde'`: 核密度估计图。显示数据点的估计概率密度。适合可视化分布的整体形状和峰值。

## 输出

*   一个图像文件（例如 `.png`），保存在指定的 `--output_path`。该图表显示了所选晶粒属性（x 轴）和晶粒度数（y 轴）之间的关系。

## 解读与材料学意义

*   **趋势分析**: 观察图中的总体趋势。度数是否随着属性值的变化而增加或减少？例如，绘制度数与面积的关系图可能显示小晶粒通常比较大晶粒拥有更多还是更少的邻居。
*   **分布形状 (KDE/Hexbin)**: 观察数据点集中的区域。是否存在特别常见的属性值和度数组合？
*   **异常值**: 识别任何具有异常属性和度数组合的晶粒。
*   **比较**: 为具有不同整体性能（例如，高/低 Hc20）或在不同条件下处理的样本生成这些图。比较其趋势。晶粒尺寸/形状与连通性之间的关系在不同样本之间是否存在显著差异？
*   **与理论联系**: 将观察到的趋势与理论预期或已知现象联系起来。例如，在密集堆积的结构中，预计较小的晶粒平均邻居数量会更高（接近堆积密度的相关值）。与此的偏差可能表明存在特定的结构特征或非理想堆积。

通过检查这些图表，您可以定量地理解局部连通性（度）如何与微观结构中其他基本晶粒特征相关联。
