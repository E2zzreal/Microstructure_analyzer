# `plot_degree_vs_property.py` Documentation

## Purpose

This script generates plots to explore the relationship between the topological degree of a grain (i.e., its number of neighbors, typically `neighbor_count`) and other geometric or shape properties of that grain (e.g., `area`, `aspect_ratio`, `compactness`).

Understanding these relationships can reveal if certain types of grains (e.g., small grains, elongated grains) tend to have higher or lower connectivity within the microstructure.

## Prerequisites

*   A `_details.csv` file containing per-grain features for the sample, including `neighbor_count` (or the specified degree feature) and the chosen property feature. This file is generated by `run_feature_extraction.py` using the `--save_grain_details` flag.

## Usage

```bash
python plot_degree_vs_property.py --details_csv <path_to_details_file> \
                                  --output_path <path_to_save_image.png> \
                                  [--property <feature_name>] \
                                  [--degree <feature_name>] \
                                  [--plot_type <type>]
```

## Arguments

*   `--details_csv` (required): Path to the input `_details.csv` file containing per-grain features.
*   `--output_path` (required): Path where the output plot image (e.g., `.png`) will be saved.
*   `--property` (optional): The name of the feature column to plot on the x-axis. Default: `'area'`.
*   `--degree` (optional): The name of the feature column (representing grain degree) to plot on the y-axis. Default: `'neighbor_count'`.
*   `--plot_type` (optional): The type of plot to generate. Options are:
    *   `'scatter'` (default): Shows individual data points. Good for observing raw distribution but can suffer from overplotting with many points.
    *   `'hexbin'`: Aggregates points into hexagonal bins, coloring bins by point density. Good for large datasets to visualize density patterns.
    *   `'kde'`: Kernel Density Estimate plot. Shows the estimated probability density of the data points. Good for visualizing the overall shape and peaks of the distribution.

## Output

*   An image file (e.g., `.png`) saved at the specified `--output_path`. The plot shows the relationship between the selected grain property (x-axis) and the grain degree (y-axis).

## Interpretation & Materials Science Significance

*   **Trend Analysis**: Look for overall trends in the plot. Does the degree tend to increase or decrease as the property value changes? For example, plotting degree vs. area might show if smaller grains generally have more or fewer neighbors than larger grains.
*   **Distribution Shape (KDE/Hexbin)**: Observe where the data points are concentrated. Are there specific combinations of property value and degree that are particularly common?
*   **Outliers**: Identify any grains that have unusual combinations of property and degree.
*   **Comparison**: Generate these plots for samples with different overall properties (e.g., high vs. low Hc20) or processed under different conditions. Compare the trends. Does the relationship between grain size/shape and connectivity change significantly between samples?
*   **Link to Theory**: Relate observed trends to theoretical expectations or known phenomena. For instance, in densely packed structures, smaller grains might be expected to have a higher average number of neighbors (approaching values related to packing density). Deviations from this might indicate specific structural features or non-ideal packing.

By examining these plots, you can gain a quantitative understanding of how local connectivity (degree) relates to other fundamental grain characteristics within the microstructure.
