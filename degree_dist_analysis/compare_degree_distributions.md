# `compare_degree_distributions.py` Documentation

## Purpose

This script compares the grain degree distributions across multiple samples or predefined groups of samples. It reads per-grain detail files (`_details.csv`) for several samples, extracts a specified degree feature (e.g., `neighbor_count`, `delaunay_degree_adaptive_1r1std`), and generates plots (like KDE, box plots, violin plots, or faceted histograms) to visually compare the distributions.

This is useful for identifying systematic differences in grain connectivity patterns between different experimental conditions, material batches, or performance groups.

## Prerequisites

*   Multiple `_details.csv` files, one for each sample to be compared, located within a specified folder. These files must contain the degree column chosen for comparison. They are generated by `run_feature_extraction.py` using the `--save_grain_details` flag.

## Usage

```bash
python compare_degree_distributions.py --details_folder <path_to_folder_with_details_files> \
                                       --output_path <path_to_save_comparison_plot.png> \
                                       [--file_pattern <glob_pattern>] \
                                       [--degree_column <degree_feature_name>] \
                                       [--plot_type <type>] \
                                       [--labels <label1> <label2> ...]
```

## Arguments

*   `--details_folder` (required): Path to the directory containing the `_details.csv` files for the samples to compare.
*   `--output_path` (required): Path where the output comparison plot image (e.g., `.png`) will be saved.
*   `--file_pattern` (optional): A glob pattern used to find the relevant `_details.csv` files within the `--details_folder`. Default: `'*_details.csv'`.
*   `--degree_column` (optional): The name of the column in the `_details.csv` files containing the degree data to compare. Default: `'neighbor_count'`.
*   `--plot_type` (optional): The type of plot to generate for comparison. Options are:
    *   `'kde'` (default): Kernel Density Estimate plots, overlaid for comparison. Good for visualizing distribution shapes and peaks.
    *   `'box'`: Box plots for each sample/group, showing median, quartiles, and potential outliers. Good for comparing central tendency and spread.
    *   `'violin'`: Violin plots, combining aspects of box plots and KDE plots. Good for visualizing distribution shape and density simultaneously.
    *   `'hist'`: Faceted histograms, showing the distribution for each sample in separate panels. Good for detailed frequency comparison.
*   `--labels` (optional): A list of custom labels to assign to each sample/file found (in the order they are processed, usually alphabetical). If not provided, labels are automatically generated from the beginning of the filenames (before the first underscore).

## Output

*   An image file (e.g., `.png`) saved at the specified `--output_path`. The plot visually compares the distribution of the selected degree feature across the different samples included in the analysis.

## Interpretation & Materials Science Significance

*   **Distribution Comparison (KDE/Hist)**: Compare the shapes, peak locations, and widths of the distributions between samples/groups. Does one group consistently show a higher average degree? Is the distribution wider or narrower in one group? Are there multiple peaks indicating distinct populations of grain connectivity?
*   **Central Tendency & Spread (Box/Violin)**: Compare the median degree (center line in box plot), interquartile range (box height), and overall range (whiskers) between groups. Are there significant differences in the typical connectivity or the variability of connectivity?
*   **Statistical Significance**: While this script provides visual comparison, observed differences might need formal statistical testing (e.g., t-test, ANOVA, Kruskal-Wallis test on the degree data grouped by sample) to confirm significance if required.
*   **Link to Properties/Conditions**: Relate the observed differences in degree distributions to the known differences in material properties (e.g., Hc20) or processing conditions associated with the samples/groups. This helps establish structure-property or processing-structure relationships involving grain topology.

This script facilitates the comparative analysis of grain connectivity patterns, a crucial step in understanding how microstructural topology varies and potentially influences material behavior.
