# 微观结构分析器特征文档

本文档详细说明了 `microstructure_analyzer` 包提取的特征。特征被分为区域级特征 (Per-Region)、聚合统计特征 (Aggregate Statistics) 和全局特征 (Global Features)。

## 1. 区域级特征 (Per-Region Features)

这些特征是针对微观结构图像中分割出的每一个独立区域（晶粒 Grain、薄壁 Thin Wall、连接点 Junction）单独计算的。输出数据中的前缀（`grain_`, `thinw_`, `junc_`）表明了区域类型，但基础特征的计算方法是相同的。

| 特征名称 (Feature Name)      | 计算方法 (Calculation Method)                                                                                                                               | 可能的材料学意义 (Potential Materials Science Significance)                                                                                                                                                              |
| :--------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `label`                      | 在标记过程中分配给每个区域的唯一整数标识符。                                                                                                                     | 识别独立的微观结构组分。                                                                                                                                                                                 |
| `centroid_y`, `centroid_x`   | 区域几何中心（质心）的坐标。                                                                                                                               | 定位每个晶粒/特征的位置，对于空间分布分析（例如距离、网络图）至关重要。                                                                                                                                      |
| `area`                       | 计算区域内的像素数量。                                                                                                                                     | 直接衡量晶粒/相的尺寸，强烈影响机械性能（Hall-Petch 关系）、相稳定性和动力学（晶粒长大、扩散）。                                                                                                                            |
| `equivalent_diameter`        | 与区域面积相同的圆的直径。计算公式为 `sqrt(4 * Area / pi)`。                                                                                                 | 提供标准化的区域尺寸度量，便于在不同形状间进行比较。                                                                                                                                                       |
| `feret_diameter_max`         | 区域边界上任意两条平行切线之间的最大距离。                                                                                                                     | 代表区域的最大卡尺尺寸，指示其最大范围。                                                                                                                                                                 |
| `perimeter`                  | 区域边界的近似长度。                                                                                                                                       | 与界面面积相关。较高的周长面积比通常表示更复杂的形状或更小的尺寸，影响界面能和迁移率。                                                                                                                             |
| `aspect_ratio`               | 与区域具有相同归一化二阶中心矩的椭圆的长轴长度与短轴长度之比。                                                                                                       | 指示形状各向异性。拉长的晶粒可能导致各向异性的机械性能、择优取向（织构）并影响断裂路径。                                                                                                                             |
| `compactness`                | `(4 * pi * Area) / Perimeter^2`。衡量形状接近圆的程度（对于完美圆，值为 1）。也称为圆度 (circularity)。                                                        | 量化形状规整度。偏离 1 表示不规则性，可能源于生长过程中的相互挤压、特定的晶体学惯习或变形。                                                                                                                            |
| `elongation`                 | `1 - (minor_axis_length / major_axis_length)`。衡量形状的拉伸程度。                                                                                        | 与长宽比类似，量化拉伸程度。高伸长率表明定向生长或变形。                                                                                                                                                   |
| `rectangularity`             | `Area / Area_of_Bounding_Box`。衡量区域填充其最小外接矩形的程度。                                                                                              | 指示形状的“方正”或矩形程度。可能与特定的晶体对称性或堆积方式有关。                                                                                                                                         |
| `convexity`                  | `Area / Area_of_Convex_Hull`。衡量区域接近凸形的程度（对于凸形，值为 1）。                                                                                     | 量化凹陷或表面粗糙度。低凸度表明存在凹痕或不规则边界，可能与蚀刻、腐蚀或复杂的生长界面有关。                                                                                                                            |
| `orientation`                | 主轴相对于水平轴的角度（弧度），通过对区域坐标进行主成分分析 (PCA) 计算得出。                                                                                             | 代表晶粒/特征的主要取向。集体取向一致性表明存在晶体学织构，导致材料性能的各向异性。                                                                                                                               |
| `hu_moments_0` 到 `_6`       | 从图像矩计算得到的一组 7 个对平移、缩放和旋转不变的矩。                                                                                                           | 提供对几何变换鲁棒的定量形状特征。可用于形状分类或比较。                                                                                                                                                 |
| `fractal_dimension_boxcount` | 使用盒计数算法在区域的二值图像上计算。估计 `log(N) / log(1/s)`，其中 N 是尺度 s 下的盒子数量。                                                                         | 衡量区域边界或内部结构的复杂性和空间填充能力。较高的值表示更复杂或更粗糙的形状。                                                                                                                                 |
| `skeleton_branches`          | 计算区域形态学骨架中具有 3 个或更多相邻骨架像素的像素数量。                                                                                                       | 反映内部复杂性或分支结构（例如枝晶结构、内部孔隙）。                                                                                                                                                     |
| `skeleton_length_ratio`      | 形态学骨架的长度除以区域面积。                                                                                                                               | 按尺寸归一化骨架长度，可能指示内部结构的“密度”。                                                                                                                                                 |
| `slenderness`                | `Perimeter / (2 * sqrt(pi * Area))`。与紧凑度的平方根倒数相关。                                                                                              | 另一种衡量形状不规则性或偏离圆形的度量。较高的值表示更细长或更复杂的形状。                                                                                                                                 |
| `num_neighbors`              | 与当前区域接触的相邻区域的数量（基于 `TopologyAnalyzer`）。                                                                                                  | 物理配位数。高邻居数表明环境密集堆积，影响局部应力集中和晶界滑动/迁移。                                                                                                                                   |
| `neighbor_area_mean`         | 物理上相邻的邻居区域的平均面积。                                                                                                                             | 表征直接邻居的平均尺寸。可以指示局部尺寸的均匀性或异质性。                                                                                                                                               |
| `neighbor_area_std`          | 物理上相邻的邻居区域面积的标准差。                                                                                                                             | 衡量直接邻居之间尺寸的变化。高变异可能表明异常晶粒长大或混合微观结构。                                                                                                                                     |
| `neighbor_size_variation`    | `neighbor_area_std / neighbor_area_mean`。邻居面积的变异系数。                                                                                               | 邻居间尺寸变化的归一化度量，与绝对平均尺寸无关。                                                                                                                                                 |
| `delaunay_degree_*`          | 在以特定距离阈值 (`*`) 构建的 Delaunay 图中，代表区域质心的节点的度数（连接数）。                                                                                     | 基于邻近性（不仅是物理接触）表示空间配位数。不同的阈值探测不同长度尺度上的连通性。影响逾渗、输运、网络稳定性。                                                                                                               |

*注意: `delaunay_degree_*` 特征是针对多个固定阈值（例如 `_fixed_50`）和自适应阈值（例如 `_adaptive_2r1_0std`）生成的。*

## 2. 聚合统计特征 (Aggregate Statistics)

这些特征代表了在图像内所有*相同类型*区域上计算的区域级特征的统计分布（均值和标准差）。它们以区域类型（`grain_`, `thinw_`, `junc_`）为前缀，后跟基础特征名称和统计量（`_mean` 或 `_std`）。

| 特征名称模式 ([type]_[feature]_[stat]) | 计算方法 (Calculation Method)                                                                 | 可能的材料学意义 (Potential Materials Science Significance)                                                                                                                                                                                             |
| :----------------------------------- | :--------------------------------------------------------------------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `[type]_[feature]_mean`              | 指定 `[feature]`（例如 `area`, `compactness`）在所有 `[type]` 类型（例如 `grain`, `thinw`, `junc`）区域上的平均值。 | 提供了特定特征在所有晶粒、薄壁或连接点上的平均特性。例如，`grain_area_mean` 是平均晶粒尺寸。                                                                                                                                     |
| `[type]_[feature]_std`               | 指定 `[feature]` 在所有 `[type]` 类型区域上的标准差。                                              | 量化了 `[feature]` 在晶粒、薄壁或连接点群体中的变异性或分布范围。例如，`grain_area_std` 指示了晶粒尺寸围绕平均值的离散程度，反映了微观结构的均匀性。                                                                                             |

*示例: `grain_area_mean`, `grain_area_std`, `thinw_compactness_mean`, `junc_skeleton_branches_std` 等。*

## 3. 全局特征 (Global Features)

这些特征描述了微观结构的整体特性，通常基于所有晶粒的属性和排列来计算。它们以 `global_` 为前缀。

| 特征名称 (Feature Name)          | 计算方法 (Calculation Method)                                                                                                                               | 可能的材料学意义 (Potential Materials Science Significance)                                                                                                                                                              |
| :------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `num_grains`                     | 识别出的唯一晶粒区域的总数。                                                                                                                               | 平均晶粒尺寸或晶粒密度的反向度量。直接影响由晶界面积控制的性能（强度、电导率、耐腐蚀性）。                                                                                                                             |
| `area_mean`, `area_std`          | 所有晶粒区域面积的均值和标准差。（与 `grain_area_mean/std` 重复，但通常为方便起见而包含）。                                                                             | 分析的整个样品区域的总体平均晶粒尺寸及其变化。                                                                                                                                                           |
| `total_boundary_length`          | 检测到的所有相邻晶粒区域之间边界的总长度之和。                                                                                                                   | 单位体积（或二维中的面积）的总晶界面积。较高的值与更细的晶粒尺寸相关，并影响强度和晶界扩散等性能。                                                                                                                             |
| `mean_boundary_curvature`        | 沿所有晶粒间边界计算的平均曲率。                                                                                                                             | 反映晶界网络的整体能量状态和稳定性。较高的平均曲率表明结构不太平衡，可能驱动晶粒长大。                                                                                                                               |
| `nn_dist_mean`, `nn_dist_std`    | 每个晶粒质心到其最近邻晶粒质心的欧氏距离的均值和标准差。                                                                                                           | 表征晶粒排列的平均间距和规整性。影响晶粒间相互作用、位错运动、裂纹扩展和扩散距离。                                                                                                                                 |
| `pairwise_dist_mean`, `pairwise_dist_std` | 所有晶粒质心对之间欧氏距离的均值和标准差。                                                                                                               | 提供比最近邻更广泛的空间分布度量，反映了分析区域内晶粒的整体分散或聚集情况。                                                                                                                                     |
| `orientation_mean`, `orientation_std` | 所有晶粒的 `orientation` 特征（通过 PCA 计算）的均值和标准差。                                                                                                 | 量化平均晶粒取向和排列一致性（织构）的程度。强织构导致材料性能的各向异性。                                                                                                                                   |
| `boundary_fractal_dim`           | 使用盒计数法专门在晶界的二值图像上计算的分形维数。                                                                                                               | 衡量整个晶界网络的复杂性或弯曲度。较高的值表示更曲折的边界路径，影响输运性质和断裂韧性。                                                                                                                               |
| `persistence_H0_mean`            | 在基于晶粒质心构建的 Rips 复形中，0 维拓扑特征（连通分量）的平均寿命（死亡时间 - 出生时间）。                                                                                 | 量化了当 Rips 过滤中的邻近阈值增加时，团簇或连通分量的稳定性。与晶粒聚集的规模和持久性有关。                                                                                                                            |
| `persistence_H1_mean`            | Rips 复形中 1 维拓扑特征（环/孔洞）的平均寿命。                                                                                                                | 量化晶粒空间排列中“空隙”或环的存在和稳定性。可能与孔隙度分布、网络连通性间隙或聚集的规模有关。                                                                                                                            |
| `degree_dist_[0-8]_*`            | 在以阈值 `*` 构建的 Delaunay 图中，具有特定度数（0 到 8）的节点（晶粒）的数量。                                                                                         | 描述了在给定长度尺度下晶粒网络中局部连通性的分布。与典型分布的偏差可能表明特定的堆积或有序现象。                                                                                                                            |
| `avg_clustering_*`               | 以阈值 `*` 构建的 Delaunay 图的平均聚类系数。衡量一个节点的邻居们也互为邻居的趋势。                                                                                         | 量化晶粒网络中连接的“小团体性”或局部密度。高聚类表明局部有序或分组，影响逾渗或集体行为。                                                                                                                             |
| `is_small_world_*`               | 布尔标志，指示以阈值 `*` 构建的 Delaunay 图是否表现出小世界特性（高聚类、低平均路径长度）。                                                                                   | 表明尽管存在局部聚类，但仍具有高效的连通性。可能与理解信号传播或通过微观结构网络的输运效率有关。                                                                                                                            |
| `shape_[feature]_mean/std`       | 使用辅助函数计算的特定区域级形状特征（`perimeter_area_ratio`, `compactness`, `rectangularity`, `convex_defect`, `tortuosity`, `curvature_std`, `fourier_energy`）的均值和标准差。 | 提供关于整个微观结构中晶粒形状规整性、复杂性和边界特征特定方面的全局统计数据。                                                                                                                                 |

*注意: 标有 `*` 的特征（例如 `delaunay_degree_*`, `avg_clustering_*`）是针对多个距离阈值（固定和自适应）计算的，导致输出中有多个不同的特征（例如 `global_avg_clustering_fixed_50`, `global_avg_clustering_adaptive_1r0_5std`）。*
